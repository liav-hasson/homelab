nameOverride: ""
fullnameOverride: "mongodb"

image:
  repository: mongo
  tag: "7.0"
  pullPolicy: IfNotPresent

# Single-node deployment (not a replica set)
# For production with HA, deploy 3 nodes and enable replica set
replicaSet:
  enabled: false

# Dynamic volume provisioning with volumeClaimTemplates
persistence:
  enabled: true
  size: 5Gi
  accessMode: ReadWriteOnce
  storageClass: "openebs-hostpath"

# MongoDB configuration
auth:
  enabled: true
  existingSecret: "mongodb"  # Must contain mongodb-root-password key

resources:
  requests:
    cpu: 500m
    memory: 1Gi
  limits:
    cpu: 1000m
    memory: 2Gi

service:
  type: ClusterIP
  port: 27017

# Service account
serviceAccount:
  create: true
  name: "mongodb"

# probes
probes:
  enabled: true

  liveness:
    exec:
      command:
        - mongosh
        - --quiet
        - --eval
        - "db.adminCommand('ping')"
    initialDelaySeconds: 30
    periodSeconds: 10
    timeoutSeconds: 5
    successThreshold: 1
    failureThreshold: 6

  readiness:
    exec:
      command:
        - mongosh
        - --quiet
        - --eval
        - "db.adminCommand('ping')"
    initialDelaySeconds: 10
    periodSeconds: 5
    timeoutSeconds: 3
    successThreshold: 1
    failureThreshold: 3

  startup:
    tcpSocket:
      port: 27017
    initialDelaySeconds: 5
    periodSeconds: 5
    timeoutSeconds: 3
    successThreshold: 1
    failureThreshold: 12
